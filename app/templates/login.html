<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<!-- Login form for Firebase authentication -->
<form id="login-form" method="POST" class="login-form">
    <div class="container">
        <label for="email"><b>Email</b></label>
        <input id="email" type="email" placeholder="Enter Email" name="email" required>

        <label for="password"><b>Password</b></label>
        <input id="password" type="password" placeholder="Enter Password" name="psw" required>

        <button type="submit" class="login-button">Login</button>

        <label>
            <input type="checkbox" checked="checked" name="remember"> Remember me
        </label>
    </div>

    <div class="container">
        <button type="button" class="forgot-password" onclick="location.href='forgot_password.html';">Forgot password?</button>
    </div>

    <div class="container" style="text-align:center;">
        <span>Don't have an account? <a href="{{ url_for('register') }}">Sign up</a></span>
    </div>
</form>

<!-- Include Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.7.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.7.0/firebase-auth.js"></script>

<script>
    // Firebase configuration (replace these with your Firebase project settings)
    const firebaseConfig = {
        apiKey: "your-api-key",
        authDomain: "your-auth-domain",
        projectId: "your-project-id",
        storageBucket: "your-storage-bucket",
        messagingSenderId: "your-sender-id",
        appId: "your-app-id",
        measurementId: "your-measurement-id"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // Handle form submission
    document.getElementById('login-form').addEventListener('submit', function(e) {
        e.preventDefault();

        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;

        // Firebase sign-in
        auth.signInWithEmailAndPassword(email, password)
            .then(function(userCredential) {
                // Redirect to home page after successful login
                window.location.href = '/home';
            })
            .catch(function(error) {
                alert("Login failed: " + error.message);
            });
    });
</script>

<script src="{{ url_for('static', filename='functions.js') }}" defer></script>
</body>
</html>
